# GhostBridge Configuration Example
# Copy to /etc/ghostbridge/config.yml and customize

device:
  id: "ghost-001"
  name: "Office Printer Drop"

network:
  bridge_name: "br0"
  wan_interface: "eth0"    # To wall port / switch
  lan_interface: "eth1"    # To target device
  clone_mac: true          # Clone target MAC to WAN (stealth)

tunnel:
  # Primary: WireGuard VPN
  type: "wireguard"
  interface: "wg0"
  endpoint: "your-c2-server.com:51820"
  keepalive: 25
  reconnect_delays: [5, 10, 30, 60, 300]
  
  # Fallback: DNS Tunneling (when VPN is blocked)
  dns_fallback:
    enabled: true
    domain: "t.your-c2-server.com"  # Your authoritative DNS domain
    dns_servers: []                  # Empty = use system DNS
    poll_interval: 30                # Seconds between polls
    poll_jitter: 10                  # Random ± seconds
    query_timeout: 10                # DNS query timeout
    max_queries_per_minute: 30       # Rate limit for stealth
    encoding: "base32"               # base32, hex
    use_tcp: false                   # DNS over TCP
    randomize_case: true             # 0x20 encoding for evasion
  
  # Fallback chain behavior
  fallback:
    enabled: true
    primary_retries: 3               # Retries before fallback
    restore_check_interval: 300      # Try primary every 5 min

beacon:
  enabled: true
  interval: 300            # 5 minutes
  jitter: 60               # ±1 minute random

c2:
  api_endpoint: "http://10.66.66.1:8082/api/ghostbridge"
  timeout: 30
  verify_ssl: true

stealth:
  ramfs_logs: true         # Keep logs in RAM only
  fake_identity: "Netgear GS105"  # Response to probes
  panic_on_tamper: true    # Wipe on tamper detection

logging:
  level: "WARNING"         # Minimal logging
  to_disk: false           # Never log to disk
  max_lines: 1000          # Max log lines in memory

